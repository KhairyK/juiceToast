/**
 * 2026 (C) OpenDN Foundation
 * v1.3.0 (STABLE)
 * ESM (ECMAScript Module)
 */
const isBrowser="undefined"!=typeof window&&"undefined"!=typeof document,reduceMotion=isBrowser&&window.matchMedia("(prefers-reduced-motion: reduce)").matches,TYPE_ANIMATION={success:"bounce",error:"shake",warning:"wiggle",info:"pulse",loading:"spin"};let __cssInjected=!1;const BASE_CSS='\n#juice-toast-root {\n  position: fixed;\n  z-index: 9999;\n  display: flex;\n  gap: 10px;\n  pointer-events: none;\n}\n\n/* bottom (default) */\n#juice-toast-root[data-position="bottom"] {\n  bottom: 20px;\n  left: 50%;\n  transform: translateX(-50%);\n  flex-direction: column;\n  align-items: center;\n}\n\n/* top */\n#juice-toast-root[data-position="top"] {\n  top: 20px;\n  left: 50%;\n  transform: translateX(-50%);\n  flex-direction: column;\n  align-items: center;\n}\n\n/* center */\n#juice-toast-root[data-position="center"] {\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  flex-direction: column;\n  align-items: center;\n}\n\n[id^="juice-toast-root-"] {\n  position: fixed;\n  z-index: 9999;\n  display: flex;\n  gap: 10px;\n  pointer-events: none;\n}\n\n\n/* ================= TOAST ================= */\n\n.juice-toast {\n  /* animation vars (safe for swipe) */\n  --jt-x: 0px;\n  --jt-y: 12px;\n\n  pointer-events: auto;\n  display: flex;\n  gap: 12px;\n  align-items: flex-start;\n\n  min-width: 220px;\n  max-width: 420px;\n  padding: 12px 16px;\n  margin: 6px 0;\n\n  border-radius: 8px;\n  background: #333;\n  color: #fff;\n\n  font-family: system-ui, -apple-system, "Segoe UI", Roboto, Arial;\n  font-size: 14px;\n\n  opacity: 0;\n  transform: translate(var(--jt-x), var(--jt-y));\n  transition:\n    opacity .25s ease,\n    transform .25s ease,\n    background .25s ease,\n    color .25s ease,\n    box-shadow .25s ease;\n\n  position: relative;\n  box-sizing: border-box;\n  overflow: hidden;\n}\n\n/* visible */\n.juice-toast.show {\n  opacity: 1;\n  --jt-y: 0px;\n}\n\n/* ================= ICON ================= */\n\n.juice-toast .icon {\n  width: 28px;\n  height: 28px;\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 16px;\n  line-height: 1;\n  flex: 0 0 28px;\n}\n\n/* clickable icon */\n.icon-clickable {\n  opacity: 0.85;\n  cursor: pointer;\n}\n\n.icon-clickable:hover {\n  opacity: 1;\n}\n\n/* ================= CONTENT ================= */\n\n.juice-toast .jt-content {\n  display: flex;\n  flex-direction: column;\n  gap: 4px;\n  flex: 1 1 auto;\n}\n\n/* title */\n.juice-toast .jt-title {\n  font-weight: 700;\n  font-size: 13px;\n  line-height: 1.1;\n}\n\n/* message */\n.juice-toast .jt-message {\n  font-size: 13px;\n  line-height: 1.3;\n  opacity: 0.95;\n}\n\n/* ================= ICON POSITION ================= */\n\n.jt-icon-top {\n  flex-direction: column;\n  align-items: flex-start;\n}\n\n.jt-icon-top .icon {\n  align-self: center;\n  margin-bottom: 6px;\n}\n\n/* ================= CLOSE ================= */\n\n.juice-toast-close {\n  position: absolute;\n  top: 6px;\n  right: 8px;\n  cursor: pointer;\n  font-size: 16px;\n  opacity: 0.75;\n  padding: 4px;\n  border-radius: 4px;\n}\n\n.juice-toast-close:hover {\n  opacity: 1;\n  background: rgba(255,255,255,0.06);\n}\n\n/* ================= ACTIONS ================= */\n\n.jt-actions {\n  display: flex;\n  gap: 8px;\n  margin-top: 10px;\n}\n\n.jt-action {\n  background: transparent;\n  border: 1px solid currentColor;\n  padding: 4px 10px;\n  border-radius: 6px;\n  cursor: pointer;\n  font-size: 12px;\n}\n\n/* ================= COMPACT ================= */\n\n.jt-compact {\n  padding: 8px 10px;\n  gap: 8px;\n  font-size: 0.9em;\n}\n\n/* ================= GLASS UI ================= */\n\n.jt-glass {\n  --g: calc(var(--jt-glass, 60) / 100);\n\n  background: rgba(30, 30, 30, calc(0.2 + var(--g)));\n  backdrop-filter: blur(calc(6px + (14px * var(--g))))\n                   saturate(calc(1 + (0.4 * var(--g))));\n  -webkit-backdrop-filter: blur(calc(6px + (14px * var(--g))))\n                           saturate(calc(1 + (0.4 * var(--g))));\n}\n\n/* light theme support */\n[data-theme="light"] .jt-glass {\n  background:\n    linear-gradient(\n      rgba(255,255,255, calc(0.6 * var(--g))),\n      rgba(255,255,255, calc(0.35 * var(--g)))\n    ),\n    rgba(255,255,255, calc(0.55 - (0.25 * var(--g))));\n\n  color: #111;\n\n  border:\n    1px solid rgba(0,0,0, calc(0.05 + 0.12 * var(--g)));\n\n  box-shadow:\n    0 10px 30px rgba(0,0,0, calc(0.08 + 0.18 * var(--g))),\n    inset 0 1px 0 rgba(255,255,255, calc(0.4 * var(--g)));\n}\n\n/* ================= PROGRESS BAR ================= */\n.jt-progress {\n  position: absolute;\n  left: 0;\n  bottom: 0;\n\n  height: 3px;\n  width: 100%;\n\n  background: rgba(255,255,255,.7);\n  transform-origin: left;\n  transform: scaleX(1);\n  opacity: .85;\n}\n\n/* ================= ANIMATIONS ================= */\n\n@keyframes jt-spin {\n  to { transform: rotate(360deg); }\n}\n\n@keyframes jt-pulse {\n  50% { transform: scale(1.15); }\n}\n\n@keyframes jt-shake {\n  25% { transform: translateX(-3px); }\n  50% { transform: translateX(3px); }\n  75% { transform: translateX(-3px); }\n}\n\n@keyframes jt-bounce {\n  0%   { transform: scale(1); }\n  30%  { transform: scale(1.25); }\n  60%  { transform: scale(.95); }\n  100% { transform: scale(1); }\n}\n\n@keyframes jt-wiggle {\n  0%   { transform: rotate(0); }\n  25%  { transform: rotate(-10deg); }\n  50%  { transform: rotate(10deg); }\n  75%  { transform: rotate(-6deg); }\n  100% { transform: rotate(0); }\n}\n\n@keyframes jt-pop {\n  0%   { transform: scale(.7); opacity: 0; }\n  70%  { transform: scale(1.05); opacity: 1; }\n  100% { transform: scale(1); }\n}\n\n/* ================= CLASSES ================= */\n\n.spin   { animation: jt-spin .6s linear; }\n.pulse  { animation: jt-pulse .4s ease; }\n.shake  { animation: jt-shake .4s ease; }\n.bounce { animation: jt-bounce .45s ease; }\n.wiggle { animation: jt-wiggle .5s ease; }\n.pop    { animation: jt-pop .35s ease-out; }\n\n/* ================= ICON INTERACTION ================= */\n\n.icon-clickable {\n  cursor: pointer;\n  transition: transform .15s ease, opacity .15s ease;\n}\n\n.icon-clickable:hover {\n  transform: scale(1.1);\n  opacity: .85;\n}\n\n/* ================= ACCESSIBILITY ================= */\n\n@media (prefers-reduced-motion: reduce) {\n  .spin,\n  .pulse,\n  .shake,\n  .bounce,\n  .wiggle,\n  .pop {\n    animation: none !important;\n  }\n}\n';function injectCSS(n){if(!isBrowser||__cssInjected)return;const t=document.createElement("style");t.id="juice-toast-style",t.textContent=n,document.head.appendChild(t),__cssInjected=!0}const themes={light:{bg:"#ffffff",color:"#111",border:"1px solid #e5e7eb"},dark:{bg:"#1f2937",color:"#fff",border:"1px solid rgba(255,255,255,.08)"}},sizePreset={sm:{width:"260px",padding:"10px"},md:{width:"320px",padding:"14px"},lg:{width:"420px",padding:"18px"}},juiceToast={_config:{},_queue:[],_showing:!1,_theme:"dark",_plugins:[],setup(n={}){this._config=n,this._defaults={...this._defaults,...n},this._registerTypes()},use(n){"function"==typeof n&&this._plugins.push(n)},addType(n,t={}){this._config[n]=t,this._registerTypes()},defineTheme(n,t={}){themes[n]={...themes[n]||{},...t}},setTheme(n){if(this._theme=n,!isBrowser)return;const t=document.getElementById("juice-toast-root");t&&(t.dataset.theme=n)},clear(){this._queue.length=0},destroy(){this.clear(),isBrowser&&document.getElementById("juice-toast-root")?.remove()},_registerTypes(){Object.keys(this._config).forEach((n=>{if("function"==typeof this[n]&&!this[n].__auto)return;const t=t=>this._enqueue(n,t);t.__auto=!0,this[n]=t}))},_enqueue(n,t){this._queue.push({type:n,payload:t}),this._showing||this._next()},_next(){if(!this._queue.length)return void(this._showing=!1);this._showing=!0;const n=this._queue.shift();this._showToast(n.type,n.payload)},_runPlugins(n){this._plugins.forEach((t=>{try{t(n)}catch(n){this._warn("Plugin error: "+n.message)}}))},_normalizeGlass(n){if(!0===n)return 60;if(!1===n||null==n)return 0;const t=Number(n);return Number.isFinite(t)?Math.max(0,Math.min(100,t)):0},_getRoot(n="bottom-right"){if(!isBrowser)return null;let t=document.getElementById(`juice-toast-root-${n}`);if(!t){switch(t=document.createElement("div"),t.id=`juice-toast-root-${n}`,t.dataset.position=n,t.dataset.theme=this._theme,t.style.position="fixed",t.style.zIndex=9999,n){case"top-left":t.style.top="20px",t.style.left="20px";break;case"top-right":t.style.top="20px",t.style.right="20px";break;case"bottom-left":t.style.bottom="20px",t.style.left="20px";break;case"bottom-right":t.style.bottom="20px",t.style.right="20px";break;case"top-center":t.style.top="20px",t.style.left="50%",t.style.transform="translateX(-50%)";break;case"bottom-center":t.style.bottom="20px",t.style.left="50%",t.style.transform="translateX(-50%)"}document.body.appendChild(t)}return t},_defaults:{duration:2500,maxVisible:3,swipeThreshold:60,glassUI:0,playSound:null,dev:!1,injectCSS:!0,css:null},_warn(n){this._defaults.dev&&"undefined"!=typeof console&&console.warn("[JuiceToast]",n)},_playSound(n){if(!isBrowser)return;const t="string"==typeof n&&n?n:this._defaults.playSound;if(t)try{const n=new Audio(t);n.volume=.6,n.play().catch((()=>{}))}catch{}},_showToast(n,t){if(!isBrowser)return;!1!==this._defaults.injectCSS&&injectCSS(this._defaults.css||BASE_CSS);const e={...this._config[n]||{},..."object"==typeof t?t:{message:String(t)}};e.icon=e.icon??e.icon_left_top,e.iconPack=e.iconPack??e.icon_config,e.iconLink=e.iconLink??e.icon_onClick_url,e.iconAnimate=e.iconAnimate??e.icon_onClick_animate,e.position=e.position??e.toast,e.closable=e.closable??e.closeable,e.iconPosition=e.iconPosition||"left",e.compact=!!e.compact;const s=themes[e.theme||this._theme]||{},o=document.createElement("div");o.className="juice-toast";const i=e.animation||"slide-in";if(e.enterAnimation||(o.style.animation=`${i} 0.4s ease forwards`),o.setAttribute("role","alert"),o.setAttribute("aria-live","polite"),o.tabIndex=0,e.size&&sizePreset[e.size]){const n=sizePreset[e.size];n.width&&(o.style.width=n.width),n.padding&&(o.style.padding=n.padding)}let a=null;e.progress&&(e.duration??this._defaults.duration)>0&&(a=document.createElement("div"),a.className="jt-progress",e.progressColor&&(a.style.background=e.progressColor||"rgba(255,255,255,.7)"),o.appendChild(a));const r=this._normalizeGlass(e.glassUI??this._defaults.glassUI);r>0&&(o.classList.add("jt-glass"),o.style.setProperty("--jt-glass",r)),r||(o.style.background=e.bg||s.bg),o.style.color=e.color||s.color,o.style.border=e.border||s.border,e.compact&&o.classList.add("jt-compact"),(e.glassUI??this._defaults.glassUI)&&o.classList.add("jt-glass"),e.width&&(o.style.width=e.width),e.height&&(o.style.height=e.height);let c=null;if(e.icon){c=document.createElement("i"),c.className=["icon",e.iconPack||"",e.icon].join(" ").trim(),e.iconSize&&(c.style.fontSize=e.iconSize),(e.iconLink||e.iconAnimate)&&(c.classList.add("icon-clickable"),c.onclick=n=>{n.stopPropagation(),e.iconAnimate&&(c.classList.remove(e.iconAnimate),c.offsetWidth,c.classList.add(e.iconAnimate)),e.iconLink&&window.open(e.iconLink,"_blank","noopener")});const t=e.iconAnimate??TYPE_ANIMATION[n];t&&(c.classList.add(t),c.addEventListener("click",(()=>{c.classList.remove(t),c.offsetWidth,c.classList.add(t)})))}reduceMotion&&(o.classList.remove("pop","bounce","shake","wiggle","pulse","spin"),c?.classList.remove("bounce","shake","wiggle","pulse","spin")),e.message||e.title||this._warn("Toast created without message or title"),e.icon&&!e.iconPack&&this._warn("icon provided without iconPack"),e.duration<0&&this._warn("duration cannot be negative");let l=0,d=0;o.addEventListener("touchstart",(n=>{l=n.touches[0].clientX})),o.addEventListener("touchmove",(n=>{d=n.touches[0].clientX-l,o.style.transform=`translateX(${d}px)`})),o.addEventListener("touchend",(()=>{Math.abs(d)>this._defaults.swipeThreshold?(o.style.transform=`translateX(${d>0?1e3:-1e3}px)`,setTimeout((()=>{o.remove(),this._next()}),200)):o.style.transform="",l=d=0}));const p=document.createElement("div");p.className="jt-content";const u=e.enterAnimation??"pop";if(u&&!reduceMotion&&o.classList.add(u),e.title){const n=document.createElement("div");n.className="jt-title",n.textContent=e.title,p.appendChild(n)}const m=document.createElement("div");if(m.className="jt-message",m.textContent=e.message||"",p.appendChild(m),c&&"top"===e.iconPosition?(o.classList.add("jt-icon-top"),o.appendChild(c),o.appendChild(p)):c&&"right"===e.iconPosition?(o.appendChild(p),o.appendChild(c)):(c&&o.appendChild(c),o.appendChild(p)),Array.isArray(e.actions)&&e.actions.length){const n=document.createElement("div");n.className="jt-actions",e.actions.forEach((t=>{const e=document.createElement("button");e.className="jt-action",e.textContent=t.label,e.onclick=n=>{n.stopPropagation(),t.onClick?.(n),t.closeOnClick&&(o.remove(),this._next())},n.appendChild(e)})),p.appendChild(n)}if(e.closable){const n=document.createElement("span");n.className="juice-toast-close",n.innerHTML="Ã—",n.onclick=()=>{o.remove(),this._next()},o.appendChild(n)}const h=this._getRoot(e.position),f=this._defaults.maxVisible;f&&h.children.length>=f&&h.firstChild.remove(),h.appendChild(o),this._runPlugins({toast:o,cfg:e,type:n,root:h}),requestAnimationFrame((()=>o.classList.add("show")));const g=e.duration??2500;if(0===g)return;let x,b=Date.now(),y=e.duration??this._defaults.duration;const _=()=>{if(o.__paused)b=Date.now();else{const n=Date.now();y-=n-b,b=n}y<=0?(o.classList.remove("show"),setTimeout((()=>{o.remove(),this._next()}),300)):x=requestAnimationFrame(_),a&&(a.style.transform=`scaleX(${Math.max(0,y/g)})`)};o.addEventListener("mouseenter",(()=>o.__paused=!0)),o.addEventListener("mouseleave",(()=>o.__paused=!1)),o.addEventListener("touchstart",(()=>o.__paused=!0)),o.addEventListener("touchend",(()=>o.__paused=!1)),requestAnimationFrame(_)}};export default juiceToast;export{juiceToast};