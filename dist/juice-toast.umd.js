/**
 * 2026 (C) OpenDN Foundation
 * v120/2026 Juice Toast 
 * UMD (Universal Module Definition (<script>))
 */
!function(e,t){"function"==typeof define&&define.amd?define([],t):"object"==typeof module&&module.exports?module.exports=t():e.juiceToast=t()}(this,function(){return function(){let e="undefined"!=typeof window&&"undefined"!=typeof document,t={light:{bg:"#fff",color:"#111",border:"1px solid #e5e7eb"},dark:{bg:"#1f2937",color:"#fff",border:"1px solid rgba(255,255,255,.08)"}};return{_config:{},_queue:[],_showing:!1,_theme:"dark",setup(e={}){this._config=e,this._defaults={...this._defaults,...e},this._registerTypes()},addType(e,t={}){this._config[e]=t,this._registerTypes()},defineTheme(e,i={}){t[e]={...t[e]||{},...i}},setTheme(t){if(this._theme=t,!e)return;let i=document.getElementById("juice-toast-root");i&&(i.dataset.theme=t)},clear(){this._queue.length=0},destroy(){this.clear(),e&&document.getElementById("juice-toast-root")?.remove()},_registerTypes(){Object.keys(this._config).forEach(e=>{if("function"==typeof this[e]&&!this[e].__auto)return;let t=t=>this._enqueue(e,t);t.__auto=!0,this[e]=t})},_enqueue(e,t){this._queue.push({type:e,payload:t}),this._showing||this._next()},_next(){if(!this._queue.length){this._showing=!1;return}this._showing=!0;let e=this._queue.shift();this._showToast(e.type,e.payload)},_getRoot(t){if(!e)return null;let i=document.getElementById("juice-toast-root");return i||((i=document.createElement("div")).id="juice-toast-root",document.body.appendChild(i)),i.dataset.position=t||"bottom",i.dataset.theme=this._theme,i},_normalizeGlass(e){if(!0===e)return 60;if(!1===e||null==e)return 0;let t=Number(e);return Number.isFinite(t)?Math.max(0,Math.min(100,t)):0},_defaults:{duration:2500,maxVisible:3,swipeThreshold:60,glassUI:0,playSound:null},_playSound(t){if(!e)return;let i="string"==typeof t&&t?t:this._defaults.playSound;if(i)try{let s=new Audio(i);s.volume=.6,s.play().catch(()=>{})}catch{}},_showToast(i,s){if(!e)return;let n=this._config[i]||{},o="object"==typeof s?s:{message:String(s)},a={...n,...o};a.icon=a.icon??a.icon_left_top,a.iconPack=a.iconPack??a.icon_config,a.iconLink=a.iconLink??a.icon_onClick_url,a.iconAnimate=a.iconAnimate??a.icon_onClick_animate,a.position=a.position??a.toast,a.closable=a.closable??a.closeable,a.iconPosition=a.iconPosition||"left",a.compact=!!a.compact;let l=t[a.theme||this._theme]||{},c=document.createElement("div");if(c.className="juice-toast",a.size&&sizePreset[a.size]){let d=sizePreset[a.size];d.width&&(c.style.width=d.width),d.padding&&(c.style.padding=d.padding)}let r=this._normalizeGlass(a.glassUI??this._defaults.glassUI);r>0&&(c.classList.add("jt-glass"),c.style.setProperty("--jt-glass",r)),r||(c.style.background=a.bg||l.bg),c.style.color=a.color||l.color,c.style.border=a.border||l.border,(a.glassUI??this._defaults.glassUI)&&c.classList.add("jt-glass"),a.width&&(c.style.width=a.width),a.height&&(c.style.height=a.height);let h=null;a.icon&&((h=document.createElement("i")).className=["icon",a.iconPack||"",a.icon].join(" ").trim(),a.iconSize&&(h.style.fontSize=a.iconSize),(a.iconLink||a.iconAnimate)&&(h.classList.add("icon-clickable"),h.onclick=e=>{e.stopPropagation(),a.iconAnimate&&(h.classList.remove(a.iconAnimate),h.offsetWidth,h.classList.add(a.iconAnimate)),a.iconLink&&window.open(a.iconLink,"_blank","noopener")}));let u=0,p=0;c.addEventListener("touchstart",e=>{u=e.touches[0].clientX}),c.addEventListener("touchmove",e=>{p=e.touches[0].clientX-u,c.style.transform=`translateX(${p}px)`}),c.addEventListener("touchend",()=>{Math.abs(p)>this._defaults.swipeThreshold?(c.style.transform=`translateX(${p>0?1e3:-1e3}px)`,setTimeout(()=>{c.remove(),this._next()},200)):c.style.transform="",u=p=0});let m=document.createElement("div");if(m.className="jt-content",a.title){let f=document.createElement("div");f.className="jt-title",f.textContent=a.title,m.appendChild(f)}let g=document.createElement("div");if(g.className="jt-message",g.textContent=a.message||"",m.appendChild(g),h&&"top"===a.iconPosition?(c.classList.add("jt-icon-top"),c.appendChild(h),c.appendChild(m)):h&&"right"===a.iconPosition?(c.appendChild(m),c.appendChild(h)):(h&&c.appendChild(h),c.appendChild(m)),Array.isArray(a.actions)&&a.actions.length){let $=document.createElement("div");$.className="jt-actions",a.actions.forEach(e=>{let t=document.createElement("button");t.className="jt-action",t.textContent=e.label,t.onclick=t=>{t.stopPropagation(),e.onClick?.(t),e.closeOnClick&&(c.remove(),this._next())},$.appendChild(t)}),m.appendChild($)}if(a.closable){let y=document.createElement("span");y.className="juice-toast-close",y.innerHTML="\xd7",y.onclick=()=>{c.remove(),this._next()},c.appendChild(y)}let b=this._getRoot(a.position),v=this._defaults.maxVisible;v&&b.children.length>=v&&b.firstChild.remove(),b.appendChild(c),requestAnimationFrame(()=>c.classList.add("show"));let k=a.duration??2500;if(0===k)return;let C=Date.now(),E=a.duration??this._defaults.duration,L,w=()=>{if(c.__paused)C=Date.now();else{let e=Date.now();E-=e-C,C=e}E<=0?(c.classList.remove("show"),setTimeout(()=>{c.remove(),this._next()},300)):L=requestAnimationFrame(w)};c.addEventListener("mouseenter",()=>c.__paused=!0),c.addEventListener("mouseleave",()=>c.__paused=!1),c.addEventListener("touchstart",()=>c.__paused=!0),c.addEventListener("touchend",()=>c.__paused=!1),requestAnimationFrame(w)}}}()});