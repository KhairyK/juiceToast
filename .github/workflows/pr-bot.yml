name: PR Bot

on:
  pull_request:
    types: [opened, reopened]

permissions:
  pull-requests: write
  issues: write

jobs:
  triage:
    runs-on: ubuntu-latest
    steps:
      - name: Auto assign maintainer
        uses: actions/github-script@v7
        with:
          script: |
            github.rest.issues.addAssignees({
              owner: context.repo.owner,
              repo: context.repo.repo,
              issue_number: context.issue.number,
              assignees: ["KhairyK"]
            })

      - name: Auto label PR
        uses: actions/github-script@v7
        with:
          script: |
            const title = context.payload.pull_request.title.toLowerCase()
            const labels = []

            if (title.includes("fix")) labels.push("bug")
            if (title.includes("feat") || title.includes("feature")) labels.push("feature")
            if (title.includes("docs")) labels.push("documentation")
            if (title.includes("refactor")) labels.push("refactor")
            if (title.includes("chore")) labels.push("chore")
            if (title.includes("test")) labels.push("tests")
            if (title.includes("deps") || title.includes("dependabot")) labels.push("dependencies")

            if (labels.length > 0) {
              github.rest.issues.addLabels({
                owner: context.repo.owner,
                repo: context.repo.repo,
                issue_number: context.issue.number,
                labels
              })
            }

      - name: Comment on PR
        uses: actions/github-script@v7
        with:
          script: |
            github.rest.issues.createComment({
              owner: context.repo.owner,
              repo: context.repo.repo,
              issue_number: context.issue.number,
              body: `
ğŸ‘‹ **Hello and thank you for your Pull Request!**

Thanks for contributing to **JuiceToast** ğŸ¹  
Your PR has been successfully received and is now under review.

### What happens next?
- âœ… Maintainer has been automatically assigned
- ğŸ·ï¸ Relevant labels have been added
- ğŸ” We'll review your changes carefully

### Contribution tips:
- Keep changes focused and well-documented
- Avoid breaking backward compatibility
- If this PR fixes an issue, please reference it

We truly appreciate your effort in improving JuiceToast.  
Every contribution helps make the project better ğŸš€

Happy coding! ğŸ’™
`
            })
